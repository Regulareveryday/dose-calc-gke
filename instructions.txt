1.Â Install google cloud sdk and authorise
https://cloud.google.com/sdk/docs/

2. Enable GCP api
gcloud services enable container.googleapis.com compute.googleapis.com containerregistry.googleapis.com cloudbuild.googleapis.com

4. Install kubectl

3. Create cluster
gcloud container clusters create my-cluster \
    --preemptible \
    --zone us-central1-a \
    --scopes cloud-platform \
    --num-nodes 1

gcloud container clusters get-credentials my-cluster --zone us-central1-a

4. build image of script and service and push to the dockerhub (remember to login to dockerhub and apply corresponding credentials)
    new-server-image-to-dockerhub.sh
    new-script-image-to-dockerhub.sh
4. apply volumes settings (cluster-setings/create_volume.sh)
5. apply deployment of the app
    kubectl apply -f deployment.yaml
6. expose port with service
    kubectl expose deployment flask-deployment --type="NodePort" --port 5000
7. allow traffic on the port that was exposed (external port)
    gcloud compute firewall-rules create my-rule-2 --allow=tcp:PORTNUM

Check if server id running
    curl http:\\NODEIP:PORTNUM
    NODEIP=$(kubectl get nodes -o jsonpath='{ $.items[*].status.addresses[?(@.type=="ExternalIP")].address }')


8. Delete cluster
    gcloud container clusters delete my-cluster

# useful links
https://kubernetes.io/docs/tasks/administer-cluster/access-cluster-api/#without-kubectl-proxy
